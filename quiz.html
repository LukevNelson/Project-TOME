<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T.O.M.E. - Personality Assessment</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/quiz.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-text">T.O.M.E.</span>
                <span class="brand-subtitle">The Omniverse of Magical Education</span>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="books.html" class="nav-link">Books</a></li>
                <li class="nav-item"><a href="characters.html" class="nav-link">Characters</a></li>
                <li class="nav-item"><a href="magic-system.html" class="nav-link">Magic</a></li>
                <li class="nav-item"><a href="species.html" class="nav-link">Species</a></li>
                <li class="nav-item"><a href="codex.html" class="nav-link">Codex</a></li>
                <li class="nav-item"><a href="quiz.html" class="nav-link active">Quiz</a></li>
            </ul>
        </div>
    </nav>

    <!-- Quiz Container -->
    <div class="quiz-container">
        <!-- Registration Step -->
        <section id="registration" class="quiz-step active">
            <div class="step-header">
                <h1>Welcome to the Skulduggery Pleasant Universe</h1>
                <p>Begin your magical journey by telling us about yourself</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- Comprehensive Quiz Preparation Videos -->
            <div class="quiz-preparation-section">
                <h2>üì∫ Quiz Preparation Materials</h2>
                
                <!-- Quiz Tutorial Videos -->
                <div class="image-gallery">
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Quiz Overview & Strategy</div>
                            <div class="video-description">Complete preparation guide</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Species Selection Guide</div>
                            <div class="video-description">Choosing your magical identity</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Name Generation Tips</div>
                            <div class="video-description">Creating meaningful taken names</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Magic Discipline Deep Dive</div>
                            <div class="video-description">Understanding your abilities</div>
                        </div>
                    </div>
                </div>

                <!-- Character Creation Masterclass -->
                <div class="video-showcase">
                    <div class="video-placeholder">
                        <div class="play-button"></div>
                        <div class="video-title">Complete Character Creation Masterclass</div>
                        <div class="video-description">Expert guidance on building a compelling magical character from concept to completion, including personality development, background creation, and roleplay techniques.</div>
                    </div>
                </div>

                <!-- Quiz Question Analysis -->
                <div class="image-gallery">
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Personality Question Analysis</div>
                            <div class="video-description">Understanding the psychology</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Combat Scenario Breakdowns</div>
                            <div class="video-description">Strategic thinking guides</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Moral Choice Implications</div>
                            <div class="video-description">Ethics in magic decisions</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Hidden Quiz Mechanics</div>
                            <div class="video-description">Advanced scoring systems</div>
                        </div>
                    </div>
                </div>

                <!-- Previous Quiz Results Analysis -->
                <div class="magic-demo">
                    <div class="demo-header">
                        <span class="demo-icon">üìä</span>
                        <span class="demo-title">Results Analysis Archive</span>
                    </div>
                    <div class="demo-content">
                        <div class="demo-description">
                            Analyze hundreds of previous quiz results to understand patterns, common outcomes, and optimal answer strategies for achieving your desired magical identity.
                        </div>
                        <div class="demo-visual">
                            <div class="video-placeholder">
                                <div class="play-button"></div>
                                <div>Results Analysis</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Expert Commentary Series -->
                <div class="image-gallery">
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Derek Landy Quiz Commentary</div>
                            <div class="video-description">Author insights on character types</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Fan Favorite Results</div>
                            <div class="video-description">Most popular character builds</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Rare Outcome Showcase</div>
                            <div class="video-description">Unique magical combinations</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Community Quiz Sessions</div>
                            <div class="video-description">Live quiz-taking events</div>
                        </div>
                    </div>
                </div>

                <!-- Character Development After Quiz -->
                <div class="video-showcase">
                    <div class="video-placeholder">
                        <div class="play-button"></div>
                        <div class="video-title">Beyond the Quiz: Character Evolution</div>
                        <div class="video-description">Learn how to develop your quiz results into a fully-realized character for roleplay, fan fiction, or personal enjoyment. Includes advanced character development techniques and community integration tips.</div>
                    </div>
                </div>

                <!-- Quiz Remake and Variations -->
                <div class="image-gallery">
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Advanced Quiz Variations</div>
                            <div class="video-description">Extended questionnaire options</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Seasonal Quiz Updates</div>
                            <div class="video-description">New questions and outcomes</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Multi-Character Quiz Mode</div>
                            <div class="video-description">Creating multiple personas</div>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <div class="video-placeholder">
                            <div class="play-button"></div>
                            <div class="video-title">Quiz Accuracy Calibration</div>
                            <div class="video-description">Improving result precision</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="registration-form">
                <div class="form-group">
                    <label for="givenFirstName">Given First Name</label>
                    <input type="text" id="givenFirstName" required>
                </div>
                
                <div class="form-group">
                    <label for="givenLastName">Given Last Name</label>
                    <input type="text" id="givenLastName" required>
                </div>
                
                <div class="form-group">
                    <label for="age">Age</label>
                    <input type="number" id="age" min="10" max="999" required>
                </div>
                
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" required>
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="non-binary">Non-Binary</option>
                        <option value="prefer-not-to-say">Prefer Not to Say</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="location">Location</label>
                    <select id="location">
                        <option value="ireland">Ireland</option>
                        <option value="uk">United Kingdom</option>
                        <option value="usa">United States</option>
                        <option value="australia">Australia</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-section">
                    <h3>üåü Choose Your Species</h3>
                    <p>Each species offers unique abilities, cultural backgrounds, and roleplay opportunities</p>
                    <div class="species-grid">
                        <div class="species-card" onclick="selectSpecies('human')" data-species="human">
                            <div class="species-header">
                                <span class="species-emoji">üë§</span>
                                <h4>Human</h4>
                            </div>
                            <div class="species-description">
                                <p>Adaptable and determined, humans excel through will and ingenuity.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üéØ Versatile</span>
                                    <span class="ability-tag">üß† Quick Learning</span>
                                    <span class="ability-tag">üí™ Resilient</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('vampire')" data-species="vampire">
                            <div class="species-header">
                                <span class="species-emoji">üßõ</span>
                                <h4>Vampire</h4>
                            </div>
                            <div class="species-description">
                                <p>Ancient predators with supernatural strength and centuries of knowledge.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üåô Night Vision</span>
                                    <span class="ability-tag">üíâ Blood Magic</span>
                                    <span class="ability-tag">üëÅÔ∏è Hypnosis</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('werewolf')" data-species="werewolf">
                            <div class="species-header">
                                <span class="species-emoji">üê∫</span>
                                <h4>Werewolf</h4>
                            </div>
                            <div class="species-description">
                                <p>Fierce shapeshifters who balance human intellect with primal instincts.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üîÑ Transformation</span>
                                    <span class="ability-tag">üëÉ Enhanced Senses</span>
                                    <span class="ability-tag">üèÉ Pack Bond</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('sorcerer')" data-species="sorcerer">
                            <div class="species-header">
                                <span class="species-emoji">üßô</span>
                                <h4>Sorcerer</h4>
                            </div>
                            <div class="species-description">
                                <p>Born with innate magical abilities, masters of arcane forces.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">‚ú® Innate Magic</span>
                                    <span class="ability-tag">üîÆ Spell Mastery</span>
                                    <span class="ability-tag">‚ö° Raw Power</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('skeleton')" data-species="skeleton">
                            <div class="species-header">
                                <span class="species-emoji">üíÄ</span>
                                <h4>Skeleton</h4>
                            </div>
                            <div class="species-description">
                                <p>Undead beings free from flesh, gaining unique perspectives on existence.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üõ°Ô∏è Undead Nature</span>
                                    <span class="ability-tag">üëª Fear Immunity</span>
                                    <span class="ability-tag">üî¨ Logic Focus</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('zombie')" data-species="zombie">
                            <div class="species-header">
                                <span class="species-emoji">üßü</span>
                                <h4>Zombie</h4>
                            </div>
                            <div class="species-description">
                                <p>Reanimated beings with incredible endurance and resistance to harm.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üí™ Superhuman Strength</span>
                                    <span class="ability-tag">üõ°Ô∏è Damage Resistance</span>
                                    <span class="ability-tag">üß† Memory Fragments</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('witch')" data-species="witch">
                            <div class="species-header">
                                <span class="species-emoji">üßô‚Äç‚ôÄÔ∏è</span>
                                <h4>Witch</h4>
                            </div>
                            <div class="species-description">
                                <p>Practitioners of natural magic, connected to ancient traditions.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üåø Nature Magic</span>
                                    <span class="ability-tag">üîÆ Divination</span>
                                    <span class="ability-tag">‚öóÔ∏è Potion Brewing</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('demon')" data-species="demon">
                            <div class="species-header">
                                <span class="species-emoji">üòà</span>
                                <h4>Demon</h4>
                            </div>
                            <div class="species-description">
                                <p>Otherworldly beings with dark powers and forbidden knowledge.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üî• Hellfire</span>
                                    <span class="ability-tag">üëπ Intimidation</span>
                                    <span class="ability-tag">üìú Dark Contracts</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('angel')" data-species="angel">
                            <div class="species-header">
                                <span class="species-emoji">üëº</span>
                                <h4>Angel</h4>
                            </div>
                            <div class="species-description">
                                <p>Celestial beings with divine powers and unwavering moral compass.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">‚ú® Divine Light</span>
                                    <span class="ability-tag">üõ°Ô∏è Holy Protection</span>
                                    <span class="ability-tag">‚ù§Ô∏è Healing Touch</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('gist')" data-species="gist">
                            <div class="species-header">
                                <span class="species-emoji">üëª</span>
                                <h4>Gist</h4>
                            </div>
                            <div class="species-description">
                                <p>Spectral entities existing between life and death, masters of ethereal magic.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üëª Intangibility</span>
                                    <span class="ability-tag">üåÄ Spirit Magic</span>
                                    <span class="ability-tag">üì° Astral Sight</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('faceless-one')" data-species="faceless-one">
                            <div class="species-header">
                                <span class="species-emoji">üé≠</span>
                                <h4>Faceless One</h4>
                            </div>
                            <div class="species-description">
                                <p>Mysterious beings without fixed form, masters of disguise and infiltration.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üé≠ Shapeshifting</span>
                                    <span class="ability-tag">üîç Perfect Mimicry</span>
                                    <span class="ability-tag">ü§´ Anonymity</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="species-card" onclick="selectSpecies('remnant')" data-species="remnant">
                            <div class="species-header">
                                <span class="species-emoji">‚ö∞Ô∏è</span>
                                <h4>Remnant</h4>
                            </div>
                            <div class="species-description">
                                <p>Echoes of powerful beings, carrying fragments of ancient knowledge.</p>
                                <div class="species-abilities">
                                    <span class="ability-tag">üìö Ancient Memories</span>
                                    <span class="ability-tag">üîÆ Fragmented Power</span>
                                    <span class="ability-tag">‚è≥ Temporal Insight</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="selected-species-preview" id="selected-species-preview" style="display: none;">
                        <h4>Selected Species: <span id="selected-species-name"></span></h4>
                        <p id="selected-species-description"></p>
                        <div class="species-lore" id="selected-species-lore"></div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>üîÆ Choose Your Primary Magical Discipline</h3>
                    <p>Each discipline offers unique abilities, combat styles, and progression paths. Your choice will influence available spells and character development.</p>
                    <div class="discipline-grid-enhanced">
                        <div class="discipline-card-enhanced" onclick="selectDiscipline('elemental')" data-discipline="elemental">
                            <div class="discipline-header-enhanced">
                                <span class="discipline-emoji-large">üî•</span>
                                <div class="discipline-info">
                                    <h4>Elemental Magic</h4>
                                    <span class="discipline-type">Destructive ‚Ä¢ Combat-Focused</span>
                                </div>
                            </div>
                            <div class="discipline-description">
                                <p>Masters of fire, water, earth, and air. Devastating in combat with raw destructive power.</p>
                                <div class="specializations">
                                    <span class="spec-tag fire">üî• Pyromancy</span>
                                    <span class="spec-tag water">üíß Hydromancy</span>
                                    <span class="spec-tag earth">üåç Geomancy</span>
                                    <span class="spec-tag air">üí® Aeromancy</span>
                                </div>
                                <div class="progression-preview">
                                    <strong>Progression:</strong> Elemental Bolt ‚Üí Elemental Shield ‚Üí Elemental Storm ‚Üí Elemental Avatar
                                </div>
                            </div>
                        </div>
                        
                        <div class="discipline-card-enhanced" onclick="selectDiscipline('adept')" data-discipline="adept">
                            <div class="discipline-header-enhanced">
                                <span class="discipline-emoji-large">‚ö°</span>
                                <div class="discipline-info">
                                    <h4>Adept Magic</h4>
                                    <span class="discipline-type">Tactical ‚Ä¢ Versatile</span>
                                </div>
                            </div>
                            <div class="discipline-description">
                                <p>Pure magical energy manipulation with tactical battlefield control and strategic advantages.</p>
                                <div class="specializations">
                                    <span class="spec-tag energy">‚ö° Energy Mastery</span>
                                    <span class="spec-tag shield">üõ°Ô∏è Barrier Magic</span>
                                    <span class="spec-tag teleport">üåÄ Teleportation</span>
                                    <span class="spec-tag time">‚è∞ Time Dilation</span>
                                </div>
                                <div class="progression-preview">
                                    <strong>Progression:</strong> Magic Missile ‚Üí Force Shield ‚Üí Lightning Storm ‚Üí Reality Warp
                                </div>
                            </div>
                        </div>
                        
                        <div class="discipline-card-enhanced" onclick="selectDiscipline('necromancy')" data-discipline="necromancy">
                            <div class="discipline-header-enhanced">
                                <span class="discipline-emoji-large">üíÄ</span>
                                <div class="discipline-info">
                                    <h4>Necromancy</h4>
                                    <span class="discipline-type">Forbidden ‚Ä¢ Strategic</span>
                                </div>
                            </div>
                            <div class="discipline-description">
                                <p>Command over death, undead minions, and life force manipulation. Powerful but morally complex.</p>
                                <div class="specializations">
                                    <span class="spec-tag death">üíÄ Death Magic</span>
                                    <span class="spec-tag undead">üßü Undead Control</span>
                                    <span class="spec-tag soul">üëª Soul Manipulation</span>
                                    <span class="spec-tag drain">ü©∏ Life Drain</span>
                                </div>
                                <div class="progression-preview">
                                    <strong>Progression:</strong> Bone Dart ‚Üí Animate Dead ‚Üí Death Ray ‚Üí Necromantic Mastery
                                </div>
                            </div>
                        </div>
                        
                        <div class="discipline-card-enhanced" onclick="selectDiscipline('symbol')" data-discipline="symbol">
                            <div class="discipline-header-enhanced">
                                <span class="discipline-emoji-large">üé≠</span>
                                <div class="discipline-info">
                                    <h4>Symbol Magic</h4>
                                    <span class="discipline-type">Intellectual ‚Ä¢ Utility</span>
                                </div>
                            </div>
                            <div class="discipline-description">
                                <p>Ancient symbols and runes that reshape reality through geometric patterns and mathematical precision.</p>
                                <div class="specializations">
                                    <span class="spec-tag runes">üìú Runic Script</span>
                                    <span class="spec-tag geometry">üî∫ Sacred Geometry</span>
                                    <span class="spec-tag binding">üîó Binding Circles</span>
                                    <span class="spec-tag ward">üõ°Ô∏è Protective Wards</span>
                                </div>
                                <div class="progression-preview">
                                    <strong>Progression:</strong> Symbol Glow ‚Üí Binding Circle ‚Üí Reality Anchor ‚Üí Master Sigil
                                </div>
                            </div>
                        </div>
                        
                        <div class="discipline-card-enhanced" onclick="selectDiscipline('sensitive')" data-discipline="sensitive">
                            <div class="discipline-header-enhanced">
                                <span class="discipline-emoji-large">üîÆ</span>
                                <div class="discipline-info">
                                    <h4>Sensitive Magic</h4>
                                    <span class="discipline-type">Psychic ‚Ä¢ Information</span>
                                </div>
                            </div>
                            <div class="discipline-description">
                                <p>Psychic abilities including telepathy, precognition, and mental manipulation of others.</p>
                                <div class="specializations">
                                    <span class="spec-tag telepathy">üß† Telepathy</span>
                                    <span class="spec-tag precog">üëÅÔ∏è Precognition</span>
                                    <span class="spec-tag psychic">üí≠ Psychometry</span>
                                    <span class="spec-tag control">üéØ Mind Control</span>
                                </div>
                                <div class="progression-preview">
                                    <strong>Progression:</strong> Thought Read ‚Üí Future Glimpse ‚Üí Mental Link ‚Üí Mind Mastery
                                </div>
                            </div>
                        </div>
                        
                        <div class="discipline-card-enhanced" onclick="selectDiscipline('unknown')" data-discipline="unknown">
                            <div class="discipline-header-enhanced">
                                <span class="discipline-emoji-large">‚ùì</span>
                                <div class="discipline-info">
                                    <h4>Unknown Magic</h4>
                                    <span class="discipline-type">Mysterious ‚Ä¢ Unpredictable</span>
                                </div>
                            </div>
                            <div class="discipline-description">
                                <p>Rare and unusual magical abilities that don't fit traditional categories. Highly unpredictable but potentially powerful.</p>
                                <div class="specializations">
                                    <span class="spec-tag chaos">üåÄ Chaos Magic</span>
                                    <span class="spec-tag void">‚ö´ Void Magic</span>
                                    <span class="spec-tag anomaly">üé≤ Reality Anomalies</span>
                                    <span class="spec-tag wild">üå™Ô∏è Wild Magic</span>
                                </div>
                                <div class="progression-preview">
                                    <strong>Progression:</strong> Random Effect ‚Üí Chaos Bolt ‚Üí Reality Glitch ‚Üí Paradigm Break
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="discipline-detailed-preview" class="discipline-detailed-preview" style="display: none;">
                        <h4>Selected Discipline: <span id="selected-discipline-name"></span></h4>
                        <div class="discipline-details-grid">
                            <div class="detail-section">
                                <h5>Combat Style</h5>
                                <p id="discipline-combat-style"></p>
                            </div>
                            <div class="detail-section">
                                <h5>Roleplay Opportunities</h5>
                                <p id="discipline-roleplay"></p>
                            </div>
                            <div class="detail-section">
                                <h5>Skill Progression</h5>
                                <div id="discipline-skills"></div>
                            </div>
                            <div class="detail-section">
                                <h5>Synergies with Species</h5>
                                <p id="discipline-species-synergy"></p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="discipline-preview" class="discipline-preview" style="display: none;">
                        <!-- Dynamic content based on discipline selection -->
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="startQuiz()">Begin Your Magical Journey</button>
            </div>
        </section>

        <!-- Personality Test -->
        <section id="personality-test" class="quiz-step">
            <div class="step-header">
                <h1>Personality Assessment</h1>
                <p>Answer these questions honestly to discover your magical nature</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="quiz-progress"></div>
                </div>
                <div class="question-counter">
                    Question <span id="current-question">1</span> of <span id="total-questions">20</span>
                </div>
            </div>
            
            <div class="question-container">
                <div class="question-card">
                    <h2 id="question-text"></h2>
                    <div class="answers-container" id="answers-container">
                        <!-- Answers will be dynamically generated -->
                    </div>
                </div>
            </div>
            
            <div class="quiz-navigation">
                <button class="btn btn-outline" id="prev-question" onclick="previousQuestion()" disabled>Previous</button>
                <button class="btn btn-primary" id="next-question" onclick="nextQuestion()" disabled>Next</button>
            </div>
        </section>

        <!-- Taken Name Selection -->
        <section id="name-selection" class="quiz-step">
            <div class="step-header">
                <h1>Choose Your Taken Name</h1>
                <p>Based on your personality, these names resonate with your magical essence</p>
                <div class="name-explanation">
                    <button class="info-button" id="name-info-btn" onclick="openNameInfoModal()">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        Why are Taken Names Important?
                    </button>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 75%"></div>
                </div>
            </div>
            
            <div class="name-selection-container">
                <div class="name-categories">
                    <div class="name-category">
                        <div class="category-header">
                            <h3>First Names</h3>
                            <div class="pagination-info">
                                <span id="first-name-page-info">Page 1 of 1</span>
                            </div>
                        </div>
                        <div class="name-grid" id="first-names-grid">
                            <!-- Names will be populated based on quiz results -->
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" id="first-names-prev" onclick="previousPage('first')" disabled>‚Üê Previous</button>
                            <button class="pagination-btn" id="first-names-next" onclick="nextPage('first')" disabled>Next ‚Üí</button>
                        </div>
                    </div>
                    
                    <div class="name-category">
                        <div class="category-header">
                            <h3>Last Names</h3>
                            <div class="pagination-info">
                                <span id="last-name-page-info">Page 1 of 1</span>
                            </div>
                        </div>
                        <div class="name-grid" id="last-names-grid">
                            <!-- Names will be populated based on quiz results -->
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" id="last-names-prev" onclick="previousPage('last')" disabled>‚Üê Previous</button>
                            <button class="pagination-btn" id="last-names-next" onclick="nextPage('last')" disabled>Next ‚Üí</button>
                        </div>
                    </div>
                </div>
                
                <div class="selected-name-preview">
                    <h3>Your Chosen Name</h3>
                    <div class="name-display">
                        <span id="selected-first-name">Choose First Name</span>
                        <span id="selected-last-name">Choose Last Name</span>
                    </div>
                    <div class="name-protection-note">
                        <p><strong>Remember:</strong> Your Taken Name protects your True Name from discovery. Choose wisely!</p>
                    </div>
                </div>
                
                <button class="btn btn-primary" id="confirm-name" onclick="safeConfirmName()" disabled>Confirm Your Taken Name</button>
            </div>
        </section>

        <!-- True Name Revelation -->
        <section id="true-name-reveal" class="quiz-step">
            <div class="step-header">
                <h1>Your True Name Revealed</h1>
                <p>The universe has spoken. Your true magical identity has been determined.</p>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%"></div>
                </div>
            </div>
            
            <div class="true-name-container">
                <div class="true-name-revelation">
                    <div class="magical-circle">
                        <div class="true-name-display" id="true-name-display">
                            <!-- True name will be generated here -->
                        </div>
                    </div>
                    
                    <div class="character-summary">
                        <h3>Your Magical Profile</h3>
                        <div class="profile-details" id="profile-summary">
                            <!-- Profile details will be generated -->
                        </div>
                        
                        <div class="character-background" id="character-background" style="display: none;">
                            <h3>üìö Your Character's Background Story</h3>
                            <div class="background-story">
                                <div class="story-section" id="story-origins">
                                    <h4></h4>
                                    <p></p>
                                </div>
                                <div class="story-section" id="story-training">
                                    <h4></h4>
                                    <p></p>
                                </div>
                                <div class="story-section" id="story-motivation">
                                    <h4></h4>
                                    <p></p>
                                </div>
                                <div class="story-section" id="story-current">
                                    <h4></h4>
                                    <p></p>
                                </div>
                            </div>
                            
                            <div class="character-traits">
                                <div class="trait-category">
                                    <h5>üí™ Strengths</h5>
                                    <div class="trait-list" id="character-strengths"></div>
                                </div>
                                <div class="trait-category">
                                    <h5>‚öîÔ∏è Challenges</h5>
                                    <div class="trait-list" id="character-challenges"></div>
                                </div>
                                <div class="trait-category">
                                    <h5>üé≠ Quirks</h5>
                                    <div class="trait-list" id="character-quirks"></div>
                                </div>
                                <div class="trait-category">
                                    <h5>üë• Reputation</h5>
                                    <div class="trait-list" id="character-reputation"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="final-actions">
                    <button class="btn btn-primary" onclick="saveProfile()">Save My Profile</button>
                    <button class="btn btn-outline" onclick="viewProfile()">View Full Profile</button>
                    <button class="btn btn-secondary" onclick="restartQuiz()">Take Quiz Again</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Firebase Modular Init (module) ‚Äî load only on http/https to avoid file:// CORS -->
    <script>
        (function(){
            try {
                if (location.protocol === 'http:' || location.protocol === 'https:') {
                    var s = document.createElement('script');
                    s.type = 'module';
                    s.src = 'js/firebase-init.js';
                    document.head.appendChild(s);
                } else {
                    console.warn('[firebase-init] Skipping modular init on file:// protocol');
                }
            } catch (e) {
                console.warn('[firebase-init] dynamic load failed', e);
            }
        })();
    </script>
    <!-- (Compat SDK retained temporarily for legacy scripts; can be removed after full migration) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="js/dev-banner.js"></script>
    <script src="js/firebase-config.js"></script>
    
    <!-- Application Scripts -->
    <script src="js/firebase-adapters.js"></script>
    <script src="js/main.js"></script>
    <!-- Use classic script for firebase-database.js (dynamic modular import inside) -->
    <script src="js/firebase-database.js"></script>
    <script src="js/names-fix.js"></script>
    <script>
        // Dynamic loader for names.js with onload/onerror diagnostics.
        (function(){
            window.__namesLoadInfo = { loaded: false, error: null };

            // Capture errors specifically from names.js execution
            function onWindowError(e) {
                try {
                    if (e && e.filename && e.filename.indexOf('names.js') !== -1) {
                        window.__namesLoadInfo.error = e;
                        console.error('Runtime error during names.js execution:', e.message, e.filename + ':' + e.lineno);
                    }
                } catch (ex) {
                    console.error('Error handler failure', ex);
                }
            }

            window.addEventListener('error', onWindowError, true);

            // Instrumentation: watch for populateNames and nameDatabase being set/overwritten during names.js execution
            try {
                // Removed debug instrumentation: production-ready behavior restored.
                // Previously we installed property setters to trace runtime assignments
                // of `window.populateNames` and `window.nameDatabase`. Those helpers
                // are no longer present to keep the console clean.
            } catch(e){}

            var s = document.createElement('script');
            s.src = 'js/names.js';
            s.onload = function() {
                window.__namesLoadInfo.loaded = true;
                console.log('names.js loaded successfully');

                // Run the previous diagnostic/fallback now that names.js executed
                try {
                    if (!window.populateNames) {
                        if (window.nameDatabase && typeof window.nameDatabase.populateNames === 'function') {
                            window.populateNames = window.nameDatabase.populateNames;
                            console.log('populateNames attached from nameDatabase');
                        } else if (typeof populateNames === 'function') {
                            window.populateNames = populateNames;
                            console.log('populateNames attached from global function');
                        } else {
                            console.warn('populateNames not found after names.js load');
                        }
                    } else {
                        console.log('populateNames already present on window');
                    }
                } catch (e) {
                    console.error('populateNames fallback error', e);
                }

                // Clean up listener after load
                try { window.removeEventListener('error', onWindowError, true); } catch(e){}
            };
            s.onerror = function(ev) {
                window.__namesLoadInfo.error = ev || new Error('names.js failed to load');
                console.error('Failed to load names.js', ev);
                try { window.removeEventListener('error', onWindowError, true); } catch(e){}
            };

            // Insert before other scripts to preserve expected order
            var ref = document.getElementsByTagName('script')[0];
            ref.parentNode.insertBefore(s, ref);
        })();
    </script>
    <!-- UI Modals (in-app confirm/toast) - load before quiz UI to avoid races -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="js/ui-modals.js"></script>
    <!-- Enforce strict reservation: do not proceed if reservation fails -->
    <script>
        window.ALLOW_PROCEED_WITHOUT_RESERVATION = false;
        // Keep auto-navigation enabled (default true); change to false if you prefer to stay on page
        // window.AUTO_NAVIGATE_TO_PROFILE = true;
    </script>
    <script src="js/quiz.js"></script>
        
    <script src="js/truename-generator.js"></script>
    
    <!-- Enhanced Character Creation Styles -->
    <style>
        .mode-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .mode-card {
            background: var(--card-bg, rgba(26, 26, 26, 0.9));
            border: 2px solid var(--border-color, #333);
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .mode-card:hover,
        .mode-card.selected {
            border-color: var(--accent-gold, #d4af37);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
        }
        
        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .mode-title {
            font-size: 1.5rem;
            color: var(--accent-gold, #d4af37);
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .mode-description {
            color: var(--text-secondary, #ccc);
            line-height: 1.4;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .mode-features {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .mode-features li {
            color: var(--text-primary, #fff);
            margin: 5px 0;
            font-size: 0.8rem;
        }
        
        .mode-features li:before {
            content: "‚ú® ";
            color: var(--accent-gold, #d4af37);
        }
        
        .enhanced-fields {
            margin: 30px 0;
            padding: 25px;
            background: rgba(26, 26, 26, 0.5);
            border-radius: 10px;
            border: 1px solid var(--border-color, #333);
        }
        
        .form-section {
            margin: 25px 0;
        }
        
        .form-section h3 {
            color: var(--accent-gold, #d4af37);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .discipline-grid-mini {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .discipline-option {
            background: var(--bg-secondary, #1a1a1a);
            border: 2px solid var(--border-color, #333);
            border-radius: 8px;
            padding: 15px 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .discipline-option:hover,
        .discipline-option.selected {
            border-color: var(--accent-gold, #d4af37);
            background: rgba(212, 175, 55, 0.1);
        }
        
        .discipline-emoji {
            display: block;
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .discipline-name {
            color: var(--text-primary, #fff);
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .discipline-preview {
            background: rgba(139, 69, 19, 0.2);
            border: 1px solid var(--accent-gold, #d4af37);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .preview-title {
            color: var(--accent-gold, #d4af37);
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .preview-text {
            color: var(--text-secondary, #ccc);
            line-height: 1.4;
            font-size: 0.9rem;
        }
        
        /* Enhanced Results Styles */
        .enhanced-results-banner {
            display: flex;
            align-items: center;
            background: linear-gradient(45deg, rgba(212, 175, 55, 0.2), rgba(139, 69, 19, 0.2));
            border: 2px solid var(--accent-gold, #d4af37);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .banner-icon {
            font-size: 3rem;
            margin-right: 20px;
        }
        
        .banner-text {
            color: var(--text-primary, #fff);
            line-height: 1.4;
        }
        
        .real-identity {
            color: var(--text-secondary, #ccc);
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .gameplay-preview {
            background: var(--bg-secondary, #1a1a1a);
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid var(--border-color, #333);
        }
        
        .gameplay-preview h3 {
            color: var(--accent-gold, #d4af37);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .preview-section {
            margin: 15px 0;
            padding: 15px;
            background: rgba(26, 26, 26, 0.5);
            border-radius: 8px;
            border-left: 4px solid var(--accent-gold, #d4af37);
        }
        
        .preview-title {
            color: var(--accent-gold, #d4af37);
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .preview-content {
            color: var(--text-secondary, #ccc);
            line-height: 1.5;
        }
        
        .btn-game {
            background: linear-gradient(45deg, #8B4513, #D4AF37);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-game:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }
        
        /* Game Integration Modal */
        .game-integration-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: var(--bg-primary, #0a0a0a);
            border: 2px solid var(--accent-gold, #d4af37);
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid var(--border-color, #333);
        }
        
        .modal-header h2 {
            color: var(--accent-gold, #d4af37);
            margin: 0;
        }
        
        .close-modal {
            font-size: 2rem;
            color: var(--text-secondary, #ccc);
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close-modal:hover {
            color: var(--accent-gold, #d4af37);
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .integration-section {
            margin: 25px 0;
        }
        
        .integration-section h3 {
            color: var(--accent-gold, #d4af37);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--accent-gold, #d4af37);
            padding-bottom: 8px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background: var(--bg-secondary, #1a1a1a);
            border-radius: 8px;
            border: 1px solid var(--border-color, #333);
        }
        
        .stat-label {
            color: var(--text-secondary, #ccc);
        }
        
        .stat-value {
            color: var(--accent-gold, #d4af37);
            font-weight: bold;
        }
        
        .faction-standings, .quest-list, .abilities-list {
            display: grid;
            gap: 10px;
        }
        
        .faction-standing {
            display: grid;
            grid-template-columns: 1fr 2fr auto;
            gap: 15px;
            align-items: center;
            padding: 10px;
            background: var(--bg-secondary, #1a1a1a);
            border-radius: 8px;
        }
        
        .faction-name {
            color: var(--text-primary, #fff);
            font-weight: bold;
            text-transform: capitalize;
        }
        
        .standing-bar {
            background: var(--bg-primary, #0a0a0a);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }
        
        .standing-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        
        .standing-value {
            color: var(--accent-gold, #d4af37);
            font-weight: bold;
            min-width: 40px;
            text-align: right;
        }
        
        .quest-item, .ability-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: var(--bg-secondary, #1a1a1a);
            border-radius: 8px;
            border: 1px solid var(--border-color, #333);
        }
        
        .quest-name, .ability-name {
            color: var(--text-primary, #fff);
            text-transform: capitalize;
        }
        
        .quest-type, .ability-level {
            color: var(--accent-gold, #d4af37);
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .modal-footer {
            padding: 20px 25px;
            border-top: 1px solid var(--border-color, #333);
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }
    </style>
    
    <!-- Enhanced Character Creation JavaScript -->
    <script>
        let selectedDiscipline = 'unknown'; // Default to unknown if none selected
        
        // Initialize quiz with smart data detection
        document.addEventListener('DOMContentLoaded', function() {
            initializeQuizWithSmartData();
        });
        
        function initializeQuizWithSmartData() {
            // Check URL parameters for mode
            const urlParams = new URLSearchParams(window.location.search);
            const mode = urlParams.get('mode');
            
            // Check for character creation data
            const characterCreationData = localStorage.getItem('characterCreationData');
            
            if (mode === 'character_creation' && characterCreationData) {
                try {
                    const data = JSON.parse(characterCreationData);
                    prefillRegistrationForm(data);
                    
                    // If user has complete data, consider skipping registration
                    if (isRegistrationDataComplete(data)) {
                        showCharacterCreationWelcome(data);
                    }
                } catch (error) {
                    console.log('Error parsing character creation data:', error);
                }
            }
        }
        
        function prefillRegistrationForm(data) {
            // Pre-fill form fields with character creation data
            if (data.givenFirstName) document.getElementById('givenFirstName').value = data.givenFirstName;
            if (data.givenLastName) document.getElementById('givenLastName').value = data.givenLastName;
            if (data.age) document.getElementById('age').value = data.age;
            if (data.location) document.getElementById('location').value = data.location;
            
            // Handle discipline mapping (character-creation uses 'chosenDiscipline', quiz uses 'discipline')
            const discipline = data.discipline || data.chosenDiscipline;
            if (discipline && discipline !== 'unknown') {
                selectedDiscipline = discipline;
                // Update discipline selection if element exists
                const disciplineElement = document.querySelector(`[data-discipline="${discipline}"]`);
                if (disciplineElement) {
                    selectDiscipline(discipline);
                }
            }
            
            // Show a welcome message indicating data was imported
            showImportNotification();
        }
        
        function isRegistrationDataComplete(data) {
            const discipline = data.discipline || data.chosenDiscipline;
            return data.givenFirstName && data.givenLastName && data.age && discipline;
        }
        
        function showCharacterCreationWelcome(data) {
            // Create a welcome banner for character creation users
            const welcomeBanner = document.createElement('div');
            welcomeBanner.className = 'character-creation-welcome';
            welcomeBanner.innerHTML = `
                <div class="welcome-content">
                    <h3>üé≠ Welcome back, ${data.givenFirstName}!</h3>
                    <p>Your character data from the Character Creation tool has been imported. Ready to dive into the personality assessment?</p>
                    <button class="btn btn-primary" onclick="proceedToQuiz()">Start Personality Quiz</button>
                    <button class="btn btn-outline" onclick="reviewRegistration()">Review/Edit Info</button>
                </div>
            `;
            
            // Insert banner at the top of registration section
            const registrationSection = document.getElementById('registration');
            registrationSection.insertBefore(welcomeBanner, registrationSection.firstChild);
        }
        
        function showImportNotification() {
            // Show a subtle notification that data was imported
            const notification = document.createElement('div');
            notification.className = 'import-notification';
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">‚ú®</span>
                    <span>Character data imported from Character Creation tool</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="notification-close">√ó</button>
                </div>
            `;
            
            // Add to registration form
            const registrationForm = document.querySelector('.registration-form');
            if (registrationForm) {
                registrationForm.insertBefore(notification, registrationForm.firstChild);
            }
        }
        
        function proceedToQuiz() {
            // Auto-fill currentUser with character creation data and proceed
            const characterCreationData = localStorage.getItem('characterCreationData');
            if (characterCreationData) {
                const data = JSON.parse(characterCreationData);
                
                // Update currentUser object with proper field mapping
                if (data.givenFirstName) currentUser.givenFirstName = data.givenFirstName;
                if (data.givenLastName) currentUser.givenLastName = data.givenLastName;
                if (data.age) currentUser.age = parseInt(data.age);
                if (data.location) currentUser.location = data.location;
                
                // Handle discipline mapping
                const discipline = data.discipline || data.chosenDiscipline;
                if (discipline) currentUser.discipline = discipline;
                
                // Set any species from character creation
                if (data.species) currentUser.species = data.species;
                
                // Proceed to quiz
                startQuiz();
            }
        }
        
        function reviewRegistration() {
            // Simply remove the welcome banner to show the form
            const welcomeBanner = document.querySelector('.character-creation-welcome');
            if (welcomeBanner) {
                welcomeBanner.remove();
            }
        }
        
        function selectDiscipline(discipline) {
            selectedDiscipline = discipline;
            
            // Update UI
            document.querySelectorAll('.discipline-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-discipline="${discipline}"]`).classList.add('selected');
            
            // Show discipline preview
            showDisciplinePreview(discipline);
        }
        
        function showDisciplinePreview(discipline) {
            const disciplineInfo = {
                elemental: {
                    title: "üî• Elemental Mage",
                    description: "Master fire, water, earth, and air. Your combat style focuses on devastating magical attacks and environmental manipulation. You'll have access to elemental temples and academy training quests."
                },
                adept: {
                    title: "‚ö° Adept Warrior", 
                    description: "Enhanced physical abilities through magic. Telekinesis, super speed, and strength. Perfect for fast-paced combat and strength-based challenges."
                },
                necromancy: {
                    title: "üíÄ Necromancer",
                    description: "Command over death, shadows, and souls. Dark magic specialist with unique underworld missions. Other mages may be wary, but necromancers will respect you."
                },
                symbol: {
                    title: "üé≠ Symbol Magic User",
                    description: "Reality manipulation through words and symbols. True name power and ancient language mastery. Scholars seek your knowledge, enemies fear your words."
                },
                sensitive: {
                    title: "üîÆ Sensitive Psychic",
                    description: "Psychic abilities including telepathy, future sight, and emotional sensing. Perfect for investigation missions and prophecy-related quests."
                },
                unknown: {
                    title: "‚ùì Unknown Potential",
                    description: "Your magical discipline is mysterious and yet to be discovered. Unpredictable abilities with unique discovery quests to unlock your true potential."
                }
            };
            
            const info = disciplineInfo[discipline];
            const preview = document.getElementById('discipline-preview');
            
            preview.innerHTML = `
                <div class="preview-title">${info.title}</div>
                <div class="preview-text">${info.description}</div>
            `;
            preview.style.display = 'block';
        }
        
        // Store unified character data for use in quiz
        function getCharacterData() {
            return {
                mode: 'unified',
                givenFirstName: document.getElementById('givenFirstName')?.value || '',
                givenLastName: document.getElementById('givenLastName')?.value || '',
                age: document.getElementById('age')?.value || 25,
                gender: document.getElementById('gender')?.value || 'prefer-not-to-say',
                location: document.getElementById('location')?.value || 'ireland',
                chosenDiscipline: selectedDiscipline || 'unknown'
            };
        }
        
        // Modify the existing startQuiz function to include unified data
        const originalStartQuiz = window.startQuiz;
        window.startQuiz = function() {
            // Store unified character creation data
            const characterData = getCharacterData();
            localStorage.setItem('characterCreationData', JSON.stringify(characterData));
            
            // Call original function
            if (originalStartQuiz) {
                originalStartQuiz();
            }
        };
        
        // Initialize with unknown discipline and show preview
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                selectDiscipline('unknown');
            }, 100);
        });
    </script>

    <!-- Name Information Modal -->
    <div id="name-info-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Understanding Magical Names</h2>
                <span class="close" onclick="closeNameInfoModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="name-explanation-section">
                    <h3>ÔøΩ Name Uniqueness in Our World</h3>
                    <p>With thousands of mages in our magical community, ensuring every player has a unique identity is crucial. Here's how our naming system works:</p>
                    <div class="explanation-grid">
                        <div class="explanation-item">
                            <h4>‚ú® Unique Variations</h4>
                            <p>We generate unique name variations using mystical prefixes, suffixes, and combinations. Names marked with ‚ú® are specially crafted variations that maintain their original meaning while ensuring your identity is distinct.</p>
                        </div>
                        <div class="explanation-item">
                            <h4>üîí Name Reservation</h4>
                            <p>Once you select a taken name, it becomes exclusively yours across the entire magical community. No other mage can claim the same combination, ensuring your magical identity remains unique and protected.</p>
                        </div>
                        <div class="explanation-item">
                            <h4>üé≠ Original vs. Variations</h4>
                            <p>Base names carry ancient power, while variations blend that power with new mystical elements. Both are equally valid and powerful - variations often carry additional layers of meaning and protection.</p>
                        </div>
                        <div class="explanation-item">
                            <h4>‚ö° Dynamic Generation</h4>
                            <p>Our system continuously creates new combinations as needed, ensuring fresh options are always available even as our community grows larger.</p>
                        </div>
                    </div>
                </div>

                <div class="name-explanation-section">
                    <h3>ÔøΩüé≠ Taken Names: Your Magical Identity</h3>
                    <p>A <strong>Taken Name</strong> is the magical identity you choose for yourself when you enter the supernatural world. It serves multiple critical purposes:</p>
                    <div class="explanation-grid">
                        <div class="explanation-item">
                            <h4>üõ°Ô∏è Protection</h4>
                            <p>Your Taken Name acts as a shield, hiding your True Name from enemies who would use it against you.</p>
                        </div>
                        <div class="explanation-item">
                            <h4>üéØ Identity</h4>
                            <p>It represents your magical persona and often reflects your personality, abilities, or aspirations.</p>
                        </div>
                        <div class="explanation-item">
                            <h4>‚ö° Power</h4>
                            <p>Many sorcerers find that their Taken Name becomes a source of strength and magical focus.</p>
                        </div>
                        <div class="explanation-item">
                            <h4>üåü Recognition</h4>
                            <p>In magical society, your Taken Name is how you're known and remembered.</p>
                        </div>
                    </div>
                </div>

                <div class="name-explanation-section">
                    <h3>üîÆ True Names: Your Deepest Secret</h3>
                    <p>Your <strong>True Name</strong> is far more dangerous and powerful than your Taken Name:</p>
                    <div class="true-name-warnings">
                        <div class="warning-item critical">
                            <h4>‚ö†Ô∏è Absolute Power</h4>
                            <p>Anyone who knows your True Name can command you completely - you become their puppet, unable to resist their will.</p>
                        </div>
                        <div class="warning-item critical">
                            <h4>üéØ Perfect Targeting</h4>
                            <p>Spells cast using your True Name are impossible to defend against and will always find their mark.</p>
                        </div>
                        <div class="warning-item critical">
                            <h4>üíÄ Life or Death</h4>
                            <p>Someone with your True Name could kill you with a word, or worse - keep you alive and in agony forever.</p>
                        </div>
                    </div>
                    <div class="true-name-protection">
                        <h4>üîí Protecting Your True Name</h4>
                        <ul>
                            <li>Never speak it aloud, even when alone</li>
                            <li>Don't write it down anywhere</li>
                            <li>Use multiple Taken Names if necessary</li>
                            <li>Trust no one completely with this secret</li>
                            <li>Some sorcerers use magical protection spells</li>
                        </ul>
                    </div>
                </div>

                <div class="name-explanation-section">
                    <h3>üìö Historical Examples</h3>
                    <div class="historical-examples">
                        <div class="example-item">
                            <h4>Skulduggery Pleasant</h4>
                            <p><strong>Taken Name:</strong> "Skulduggery Pleasant" (chosen for its ironic humor)<br>
                            <strong>True Name:</strong> [Unknown - his greatest secret]</p>
                        </div>
                        <div class="example-item">
                            <h4>Valkyrie Cain</h4>
                            <p><strong>Given Name:</strong> Stephanie Edgley<br>
                            <strong>Taken Name:</strong> "Valkyrie Cain" (reflecting her warrior nature)<br>
                            <strong>True Name:</strong> [Discovered and used against her]</p>
                        </div>
                        <div class="example-item">
                            <h4>Multiple Identities</h4>
                            <p>Many powerful sorcerers use several Taken Names throughout their lives, changing them when one becomes compromised or no longer fits their evolution.</p>
                        </div>
                    </div>
                </div>

                <div class="name-explanation-section">
                    <h3>üé≤ Your Choice Matters</h3>
                    <div class="choice-importance">
                        <p>The name you choose now will become part of your magical identity. Consider:</p>
                        <ul>
                            <li><strong>Personality:</strong> Does it reflect who you are or who you want to become?</li>
                            <li><strong>Power:</strong> Does it sound strong and memorable?</li>
                            <li><strong>Meaning:</strong> Do the name meanings resonate with your values?</li>
                            <li><strong>Longevity:</strong> Can you see yourself using this name for years to come?</li>
                        </ul>
                        <div class="final-reminder">
                            <p><strong>Remember:</strong> In T.O.M.E., your Taken Name is your first step into a larger magical world. Choose something that makes you feel powerful and protected!</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNameInfoModal()">I Understand</button>
            </div>
        </div>
    </div>
    <script src="js/video-loader.js"></script>
</body>
</html>